!function(){"use strict";function e(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(a,c){var o=t.apply(n,r);function i(t){e(o,a,c,i,u,"next",t)}function u(t){e(o,a,c,i,u,"throw",t)}i(void 0)}))}}document.addEventListener("DOMContentLoaded",t(regeneratorRuntime.mark((function e(){var n,r,a,c,o,i,u,s,p,d,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=function(){return l=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getDisplayMedia(t);case 3:n=e.sent,r.srcObject=n,r.onloadedmetadata=function(){r.play()},e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error: ".concat(e.t0));case 11:return console.log(n.getTracks()),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,null,[[0,8]])}))),l.apply(this,arguments)},d=function(e){return l.apply(this,arguments)},p=function(){return navigator.mediaDevices.getSupportedConstraints()},s=function(){return(s=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices.enumerateDevices){e.next=4;break}console.log("不支援 enumerateDevices()"),e.next=9;break;case 4:return e.next=6,navigator.mediaDevices.enumerateDevices().then((function(e){return e})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))}));case 6:return t=e.sent,Array.prototype.forEach.call(t,(function(e){void 0!==e.getCapabilities&&e.getCapabilities()})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},u=function(){return s.apply(this,arguments)},c=function(){return c=t(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(t).then((function(e){return e})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))}));case 2:r=e.sent,n.srcObject=r,n.onloadedmetadata=function(){n.play()},console.log(r.getTracks());case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)},a=function(e){return c.apply(this,arguments)},n=document.getElementById("video-media"),r=document.getElementById("video-capture"),o=!1,i={audio:!0,video:{width:{ideal:1280},height:{ideal:720},facingMode:"environment"}},document.getElementById("getUserMedia").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a(i);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),document.getElementById("flipFacingMode").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=!o,i.video.facingMode=o?"user":"environment",e.next=5,a(i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),document.getElementById("getEnumerateDevices").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=document.querySelector("#card-enumerate .content")).innerHTML="",e.next=5,u();case 5:r=e.sent,Array.prototype.forEach.call(r,(function(e){console.log("".concat(e.kind,": ").concat(e.label)),n.insertAdjacentHTML("beforeend",'<p class="inline-block px-2 py-1 bg-main outline-none rounded text-white text-xs">'.concat(e.kind,"</p>")),n.insertAdjacentHTML("beforeend",'<p class="mb-4 p-1">'.concat(e.label,"</p>"))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),document.getElementById("getSupportedConstraints").addEventListener("click",(function(e){e.preventDefault();var t=document.querySelector("#card-support .content");t.innerHTML="";var n=p(),r=Object.keys(n);Array.prototype.forEach.call(r,(function(e){n[e]?t.insertAdjacentHTML("beforeend",'<p class="py-1"><span class="inline-flex justify-center items-center mr-1 w-4 h-4 bg-main rounded-full text-white text-sm">&check;</span>'.concat(e,"</p>")):t.insertAdjacentHTML("beforeend",'<p class="py-1"><span class="inline-flex justify-center items-center mr-1 w-4 h-4 bg-red-600 rounded-full text-white text-sm">&times;</span>'.concat(e,"</p>"))}))}),!1),document.getElementById("startCapture").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,d(i);case 3:n=e.sent,console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1);case 21:case"end":return e.stop()}}),e)}))))}();