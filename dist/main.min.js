!function(){"use strict";function e(e,t,n,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void n(e)}i.done?t(u):Promise.resolve(u).then(r,a)}function t(t){return function(){var n=this,r=arguments;return new Promise((function(a,c){var o=t.apply(n,r);function i(t){e(o,a,c,i,u,"next",t)}function u(t){e(o,a,c,i,u,"throw",t)}i(void 0)}))}}document.addEventListener("DOMContentLoaded",t(regeneratorRuntime.mark((function e(){var n,r,a,c,o,i,u,s,d,p,l,f,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v=function(){return navigator.mediaDevices.getSupportedConstraints()},m=function(){return(m=t(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices.enumerateDevices){e.next=4;break}console.log("不支援 enumerateDevices()"),e.next=9;break;case 4:return e.next=6,navigator.mediaDevices.enumerateDevices().then((function(e){return e})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))}));case 6:return t=e.sent,Array.prototype.forEach.call(t,(function(e){void 0!==e.getCapabilities&&e.getCapabilities()})),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},f=function(){return m.apply(this,arguments)},l=function(){return l=t(regeneratorRuntime.mark((function e(t){var n,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getDisplayMedia(t);case 2:return n=e.sent,r.srcObject=n,r.onloadedmetadata=function(){r.play()},a=n.getTracks(),(c=document.getElementById("captureInput")).innerHTML="",Array.prototype.forEach.call(a,(function(e){c.insertAdjacentHTML("beforeend",'<p class="inline-block px-2 py-1 bg-main outline-none rounded text-white text-xs">'.concat(e.kind,"</p>")),c.insertAdjacentHTML("beforeend",'<p class="mb-2 p-1 text-xs">'.concat(e.label,"</p>")),o(e,n)})),document.getElementById("stopCapture").onclick=function(){Array.prototype.forEach.call(a,(function(e){return e.stop()})),c.innerHTML=""},e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)},p=function(e){return l.apply(this,arguments)},d=function(){return d=t(regeneratorRuntime.mark((function e(t){var r,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(t).then((function(e){return e})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))}));case 2:r=e.sent,n.srcObject=r,n.onloadedmetadata=function(){n.play()},a=r.getTracks(),(c=document.getElementById("mediaInput")).innerHTML="",Array.prototype.forEach.call(a,(function(e){c.insertAdjacentHTML("beforeend",'<p class="inline-block px-2 py-1 bg-main outline-none rounded text-white text-xs">'.concat(e.kind,"</p>")),c.insertAdjacentHTML("beforeend",'<p class="mb-2 p-1 text-xs">'.concat(e.label,"</p>")),o(e,r)})),document.getElementById("stopUserMedia").onclick=function(){Array.prototype.forEach.call(a,(function(e){return e.stop()})),c.innerHTML=""};case 11:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)},s=function(e){return d.apply(this,arguments)},o=function(e,t){c.addTrack(e,t);var n=c.getTracks();n.length>0&&(a.srcObject=c),console.log(n)},n=document.getElementById("video-media"),r=document.getElementById("video-capture"),a=document.getElementById("video-combine"),c=new MediaStream,i=!1,u={audio:!1,video:{width:{ideal:1280},height:{ideal:720},facingMode:"environment"}},document.getElementById("getUserMedia").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s(u);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),document.getElementById("flipFacingMode").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i=!i,u.video.facingMode=i?"user":"environment",e.next=5,s(u);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),document.getElementById("startCapture").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,p(u);case 3:case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),document.getElementById("getEnumerateDevices").addEventListener("click",function(){var e=t(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=document.querySelector("#card-enumerate .content")).innerHTML="",e.next=5,f();case 5:r=e.sent,Array.prototype.forEach.call(r,(function(e){console.log("".concat(e.kind,": ").concat(e.label)),n.insertAdjacentHTML("beforeend",'<p class="inline-block px-2 py-1 bg-main outline-none rounded text-white text-xs">'.concat(e.kind,"</p>")),n.insertAdjacentHTML("beforeend",'<p class="mb-4 p-1">'.concat(e.label,"</p>"))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),!1),document.getElementById("getSupportedConstraints").addEventListener("click",(function(e){e.preventDefault();var t=document.querySelector("#card-support .content");t.innerHTML="";var n=v(),r=Object.keys(n);Array.prototype.forEach.call(r,(function(e){n[e]?t.insertAdjacentHTML("beforeend",'<p class="py-1"><span class="inline-flex justify-center items-center mr-1 w-4 h-4 bg-main rounded-full text-white text-sm">&check;</span>'.concat(e,"</p>")):t.insertAdjacentHTML("beforeend",'<p class="py-1"><span class="inline-flex justify-center items-center mr-1 w-4 h-4 bg-red-600 rounded-full text-white text-sm">&times;</span>'.concat(e,"</p>"))}))}),!1);case 24:case"end":return e.stop()}}),e)}))))}();