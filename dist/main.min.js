!function(){"use strict";function e(e,n,t,r,a,c,o){try{var i=e[c](o),u=i.value}catch(e){return void t(e)}i.done?n(u):Promise.resolve(u).then(r,a)}function n(n){return function(){var t=this,r=arguments;return new Promise((function(a,c){var o=n.apply(t,r);function i(n){e(o,a,c,i,u,"next",n)}function u(n){e(o,a,c,i,u,"throw",n)}i(void 0)}))}}document.addEventListener("DOMContentLoaded",n(regeneratorRuntime.mark((function e(){var t,r,a,c,o,i,u,s,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=function(){return(d=n(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getDisplayMedia(n);case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error: ".concat(e.t0));case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)},p=function(e){return d.apply(this,arguments)},s=function(){return navigator.mediaDevices.getSupportedConstraints()},u=function(){return(u=n(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices.enumerateDevices){e.next=4;break}console.log("不支援 enumerateDevices()"),e.next=9;break;case 4:return e.next=6,navigator.mediaDevices.enumerateDevices().then((function(e){return e})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))}));case 6:return n=e.sent,Array.prototype.forEach.call(n,(function(e){void 0!==e.getCapabilities&&e.getCapabilities()})),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)},i=function(){return u.apply(this,arguments)},a=function(){return a=n(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia(n).then((function(e){return e})).catch((function(e){console.error("".concat(e.name,": ").concat(e.message))}));case 2:r=e.sent,t.srcObject=r,t.onloadedmetadata=function(){t.play()};case 5:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)},r=function(e){return a.apply(this,arguments)},t=document.getElementById("video"),c=!1,o={audio:!0,video:{width:{ideal:1280},height:{ideal:720},facingMode:"environment"}},document.getElementById("getUserMedia").addEventListener("click",function(){var e=n(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,r(o);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),!1),document.getElementById("flipFacingMode").addEventListener("click",function(){var e=n(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c=!c,o.video.facingMode=c?"user":"environment",e.next=5,r(o);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),!1),document.getElementById("getEnumerateDevices").addEventListener("click",function(){var e=n(regeneratorRuntime.mark((function e(n){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),(t=document.querySelector("#card-enumerate .content")).innerHTML="",e.next=5,i();case 5:r=e.sent,Array.prototype.forEach.call(r,(function(e){console.log("".concat(e.kind,": ").concat(e.label)),t.insertAdjacentHTML("beforeend",'<p class="inline-block px-2 py-1 bg-main outline-none rounded text-white text-xs">'.concat(e.kind,"</p>")),t.insertAdjacentHTML("beforeend",'<p class="mb-4 p-1">'.concat(e.label,"</p>"))}));case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),!1),document.getElementById("getSupportedConstraints").addEventListener("click",(function(e){e.preventDefault();var n=document.querySelector("#card-support .content");n.innerHTML="";var t=s(),r=Object.keys(t);Array.prototype.forEach.call(r,(function(e){t[e]?n.insertAdjacentHTML("beforeend",'<p class="py-1"><span class="inline-flex justify-center items-center mr-1 w-4 h-4 bg-main rounded-full text-white text-sm">&check;</span>'.concat(e,"</p>")):n.insertAdjacentHTML("beforeend",'<p class="py-1"><span class="inline-flex justify-center items-center mr-1 w-4 h-4 bg-red-600 rounded-full text-white text-sm">&times;</span>'.concat(e,"</p>"))}))}),!1),document.getElementById("startCapture").addEventListener("click",function(){var e=n(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,p();case 3:t=e.sent,console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),!1);case 20:case"end":return e.stop()}}),e)}))))}();